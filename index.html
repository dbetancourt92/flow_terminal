<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Options Flow Terminal</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <style>
    body { background-color: #0f1115; color: white; font-family: 'Segoe UI', sans-serif; }
    table { width: 100%; font-size: 0.9rem; }
    th, td { text-align: center; padding: 0.25rem; }
    th { background-color: #1e222a; color: #ad8eff; }
    tr:hover { background-color: #22252c; cursor: pointer; }
  </style>
</head>
<body>
<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <table class="table table-dark table-bordered" id="flowTable">
        <thead><tr>
          <th>Time</th>
          <th>Ticker</th>
          <th>Contract</th>
          <th>DTE</th>
          <th>Stock</th>
          <th>OTM</th>
          <th>Spot</th>
          <th>AVG</th>
          <th>%Change</th>
          <th>Spot</th>
          <th>Size</th>
          <th>Premium</th>
          <th>Volume</th>
          <th>OI</th>
          <th>Chain%</th>
          <th>Multi</th>
        </tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>

<script>
  const tableBody = document.querySelector('#flowTable tbody');
  const ws = new WebSocket("wss://flow-terminal.onrender.com");

  ws.onmessage = event => {
    const row = JSON.parse(event.data);
    if (!row || row.length < 16) return;

    const tr = document.createElement('tr');
    row.forEach(val => {
      const td = document.createElement('td');
      td.textContent = val;
      tr.appendChild(td);
    });

    tableBody.prepend(tr);
    if (tableBody.rows.length > 100) tableBody.deleteRow(-1);
  };
</script>
</body>
</html>

